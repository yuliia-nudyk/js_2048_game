parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function t(t){return a(t)||r(t)||n(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function r(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return o(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c=document.querySelector(".game-score"),i=document.querySelector(".best-score"),s=document.querySelector(".button"),l=document.querySelectorAll(".field-cell"),d=document.querySelector(".message-start"),f=document.querySelector(".message-win"),u=document.querySelector(".message-lose");i.textContent=localStorage.getItem("best")||0,s.addEventListener("click",function(){s.classList.contains("start")?(s.classList.remove("start"),s.classList.add("restart"),s.textContent="Restart",d.classList.add("hidden")):(t(l).forEach(function(t){g(t)&&t.children[0].remove()}),f.classList.contains("hidden")||f.classList.add("hidden"),u.classList.contains("hidden")||u.classList.add("hidden"),c.textContent=0),v(),v()});var h=0;function v(){var e=t(l).filter(function(t){return m(t)}),n=e.length,r=Math.floor(Math.random()*n),a=Math.floor(10*Math.random())+1,o=document.createElement("div");if(o.classList.add("field-cell__card"),4===a?(o.classList.add("field-cell__card--4"),o.textContent=4):(o.classList.add("field-cell__card--2"),o.textContent=2),e[r].append(o),o.style.transform="scale(0.5)",setTimeout(function(){o.style.transform="scale(1.0)"},75),t(l).every(function(t){return g(t)})){h=0;for(var c=4,i=0;i<l.length;i++){i===c&&(c+=4);var s=l[i].children[0].textContent;if(i+1<c&&l[i+1].children[0].textContent===s){h++;break}if(i+4<l.length&&l[i+4].children[0].textContent===s){h++;break}}0===h&&(f.classList.contains("hidden")||f.classList.add("hidden"),u.classList.remove("hidden"))}}function m(t){return 0===t.children.length}function g(t){return 1===t.children.length}document.addEventListener("keydown",function(t){switch(t.key){case"ArrowDown":!function(){(function(){for(var t=l.length-1;t>=0;t--)if(g(l[t]))for(var n=l[t].children[0],r=n.textContent,a=t-4;a>=0;a-=4)if(g(l[a])){var o=l[a].children[0];if(o.textContent===r){var c=(t-a)/4;e(n,o,r,c,"down")}break}})(),function(){for(var t=l.length-1;t>=0;t--)if(g(l[t])){for(var e=void 0,r=t+4;r<l.length&&m(l[r]);r+=4)e=r;if(e>=0){var a=(e-t)/4,o=l[t].children[0];n(o,e,a,"down")}}}()}();break;case"ArrowUp":!function(){(function(){for(var t=0;t<l.length;t++)if(g(l[t]))for(var n=l[t].children[0],r=n.textContent,a=t+4;a<l.length;a+=4)if(g(l[a])){var o=l[a].children[0];if(o.textContent===r){var c=(a-t)/4;e(n,o,r,c,"up")}break}})(),function(){for(var t=0;t<l.length;t++)if(g(l[t])){for(var e=void 0,r=t-4;r>=0&&m(l[r]);r-=4)e=r;if(e>=0){var a=(t-e)/4,o=l[t].children[0];n(o,e,a,"up")}}}()}();break;case"ArrowRight":!function(){(function(){for(var t=l.length-4,n=l.length-1;n>=0;n--)if(n<t&&(t-=4),g(l[n]))for(var r=l[n].children[0],a=r.textContent,o=n-1;o>=t;o--)if(g(l[o])){var c=l[o].children[0];if(c.textContent===a){var i=n-o;e(r,c,a,i,"right")}break}})(),function(){for(var t=l.length,e=l.length-1;e>=0;e--)if(e<t-4&&(t-=4),g(l[e])){for(var r=void 0,a=e+1;a<t&&m(l[a]);a++)r=a;if(r>=0){var o=r-e,c=l[e].children[0];n(c,r,o,"right")}}}()}();break;case"ArrowLeft":!function(){(function(){for(var t=4,n=0;n<l.length;n++)if(n===t&&(t+=4),g(l[n]))for(var r=l[n].children[0],a=r.textContent,o=n+1;o<t;o++)if(g(l[o])){var c=l[o].children[0];if(c.textContent===a){var i=o-n;e(r,c,a,i,"left")}break}})(),function(){for(var t=0,e=0;e<l.length;e++)if(e===t+4&&(t+=4),g(l[e])){for(var r=void 0,a=e-1;a>=t&&m(l[a]);a--)r=a;if(r>=0){var o=e-r,c=l[e].children[0];n(c,r,o,"left")}}}()}()}function e(t,e,n,r,a){var o,s;switch(a){case"down":o="-",s="Y";break;case"up":o="+",s="Y";break;case"right":o="-",s="X";break;case"left":o="+",s="X"}t.classList.remove("field-cell__card--".concat(n)),t.classList.add("field-cell__card--".concat(2*n)),t.textContent=2*n,e.remove();var l=document.createElement("div");l.classList.add("field-cell__moved-card"),l.classList.add("field-cell__moved-card--".concat(n)),l.textContent=n,t.append(l),l.style.transform="\n      translate".concat(s,"(calc(").concat(o).concat(r," * (100% + 10px)))\n    "),setTimeout(function(){l.style.transform="translateY(0)"},0),setTimeout(function(){l.remove(),t.style.transform="scale(1.1)",setTimeout(function(){t.style.transform="scale(1.0)"},150)},150),c.textContent=+c.textContent+2*n,c.textContent>+i.textContent&&(localStorage.setItem("best",c.textContent),i.textContent=localStorage.getItem("best")),2*n==2048&&f.classList.remove("hidden"),h++}function n(t,e,n,r){var a,o;switch(r){case"down":a="-",o="Y";break;case"up":a="+",o="Y";break;case"right":a="-",o="X";break;case"left":a="+",o="X"}t.remove(),l[e].append(t),t.style.transform="\n      translate".concat(o,"(calc(").concat(a).concat(n," * (100% + 10px)))\n    "),setTimeout(function(){t.style.transform="translate".concat(o,"(0)")},0),h++}h>0&&setTimeout(function(){v(),h=0},150)});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.a1eebdb3.js.map